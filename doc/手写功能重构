è¿™æ˜¯ä¸€ä¸ªéå¸¸å…¸å‹çš„ PDF å¼€å‘ç—›ç‚¹ã€‚ä½ é‡åˆ°çš„ä¸‰ä¸ªé—®é¢˜ï¼ˆé—ªçƒã€çº¿æ¡ä¸å¯è§ã€åæ ‡åç§»ï¼‰å…¶å®æ˜¯ä¸‰ä¸ªä¸åŒçš„æŠ€æœ¯å‘ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡é‡æ„æ¶æ„ä¸€æ¬¡æ€§è§£å†³ã€‚

é—®é¢˜æ ¹æºåˆ†æ
é—ªçƒåˆ·æ–°é—®é¢˜ï¼š

åŸå› ï¼šä½ åœ¨ AndroidView çš„ update é€»è¾‘ä¸­ï¼Œå¾ˆå¯èƒ½æŠŠ isAnnotationModeï¼ˆæ˜¯å¦å¼€å¯æ‰¹æ³¨ï¼‰ä½œä¸ºäº†é‡æ–° load() PDF çš„æ¡ä»¶ã€‚

ç»“æœï¼šæ¯æ¬¡ä½ ç‚¹å‡»â€œå¼€å¯æ‰‹å†™â€ï¼ŒCompose å‘ç°çŠ¶æ€å˜äº†ï¼Œå°±è§¦å‘ pdfView.fromFile(...).load()ï¼Œå¯¼è‡´ PDF é‡æ–°æ¸²æŸ“ï¼Œå±å¹•è‡ªç„¶ä¼šé—ªçƒã€‚

æ»‘åŠ¨æ—¶ä¸æ˜¾ç¤ºçº¿æ¡ï¼š

åŸå› ï¼šä½ å¯èƒ½æŠŠç»˜åˆ¶é€»è¾‘å…¨æ”¾åœ¨äº† pdfView.onDraw é‡Œã€‚ä½† onDraw åªæœ‰åœ¨ View éœ€è¦åˆ·æ–°æ—¶æ‰è°ƒç”¨ã€‚æ‰‹æŒ‡æ»‘åŠ¨æ—¶ï¼Œå¦‚æœæ²¡é¢‘ç¹æ‰‹åŠ¨è°ƒç”¨ invalidate()ï¼Œæˆ–è€…å±‚çº§ä¸å¯¹ï¼Œçº¿æ¡å°±ç”»ä¸å‡ºæ¥ã€‚

çº¿æ¡ä½ç½®åç§»ï¼ˆæœ€éš¾æçš„ï¼‰ï¼š

åŸå› ï¼šåæ ‡ç³»ä¸åŒ¹é…ã€‚

ä½ çš„æ‰‹æŒ‡æ˜¯åœ¨ å±å¹•åæ ‡ç³»ï¼ˆView Coordinatesï¼‰ä¸Šæ»‘åŠ¨çš„ã€‚

PDF æ˜¯åœ¨ æ–‡æ¡£åæ ‡ç³»ï¼ˆPage Coordinatesï¼‰ä¸Šæ¸²æŸ“çš„ã€‚

å½“ PDF è¢« ç¼©æ”¾ (Zoom) æˆ– æ»šåŠ¨ (Scroll) åï¼Œå±å¹•ä¸Šçš„ (100, 100) å¯èƒ½å¯¹åº” PDF ç¬¬ 5 é¡µçš„ (500, 2000)ã€‚ç›´æ¥ç”»ä¼šå¯¼è‡´çº¿æ¡â€œæ¼‚æµ®â€åœ¨é”™è¯¯ä½ç½®ã€‚

é‡æ–°è®¾è®¡æ–¹æ¡ˆï¼šåŒå±‚æ¶æ„ (The Two-Layer Approach)
ä¸ºäº†å®Œç¾è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬ä¸è¦æŠŠæ‰€æœ‰ä¸œè¥¿éƒ½å¡è¿› PDFView é‡Œã€‚æˆ‘ä»¬è¦æŠŠâ€œæ­£åœ¨ç”»çš„â€å’Œâ€œå·²ç»ç”»å¥½çš„â€åˆ†å¼€ã€‚

åº•å±‚ (PDF Layer)ï¼šåªè´Ÿè´£æ˜¾ç¤º PDF å’Œ å·²ä¿å­˜ çš„ç¬”è®°ã€‚

é¡¶å±‚ (Drawing Layer)ï¼šä¸€ä¸ªé€æ˜çš„ Canvasï¼Œè¦†ç›–åœ¨ PDF ä¸Šã€‚åªè´Ÿè´£å®æ—¶æ˜¾ç¤ºæ‰‹æŒ‡æ­£åœ¨æ»‘åŠ¨çš„çº¿æ¡ã€‚

ä¼˜ç‚¹ï¼š

é›¶å»¶è¿Ÿï¼šæ‰‹æŒ‡åœ¨å“ªï¼Œçº¿å°±åœ¨å“ªï¼Œä¸ç”¨ç­‰ PDF æ¸²æŸ“ã€‚

æ— åç§»ï¼šæ­£åœ¨ç”»çš„æ—¶å€™ç”¨çš„æ˜¯å±å¹•åæ ‡ï¼Œç»å¯¹è·Ÿæ‰‹ã€‚

ä¸é—ªçƒï¼šå¼€å…³æ‰‹å†™æ¨¡å¼åªæ˜¯æ§åˆ¶é¡¶å±‚ Canvas æ˜¯å¦æ‹¦æˆªè§¦æ‘¸äº‹ä»¶ï¼Œåº•å±‚ PDF ä¸éœ€è¦é‡è½½ã€‚

ä»£ç å®ç°
æˆ‘ä¸ºä½ é‡å†™äº† ReaderScreen.kt çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå¢åŠ äº† å¤šè‰²é€‰æ‹© å’Œ ç²¾å‡†åæ ‡æ˜ å°„ã€‚

1. å®šä¹‰æ•°æ®æ¨¡å‹ (AnnotationModels.kt)
ç¡®ä¿ä½ çš„æ•°æ®æ¨¡å‹æ”¯æŒé¢œè‰²å­˜å‚¨ã€‚

Kotlin

// AnnotationModels.kt
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.graphics.toArgb

data class AnnotationLine(
    val pageIndex: Int,          // å±äºå“ªä¸€é¡µ
    val points: List<PointFCompat>, // å½’ä¸€åŒ–çš„ç‚¹åæ ‡ (0.0 - 1.0)ï¼Œç›¸å¯¹äºè¯¥é¡µçš„å®½é«˜çš„ç™¾åˆ†æ¯”
    val color: Int,              // é¢œè‰²å€¼
    val strokeWidth: Float = 5f  // ç¬”è§¦ç²—ç»†
)

data class PointFCompat(
    val x: Float, 
    val y: Float
)
2. é‡æ„ ReaderScreen (æ ¸å¿ƒé€»è¾‘)
è¿™ä¸ªé‡æ„ç‰ˆæœ¬è§£å†³äº†é—ªçƒå’Œåç§»é—®é¢˜ã€‚

Kotlin

// ReaderScreen.kt
// å¼•å…¥å¿…è¦çš„åŒ…...

@Composable
fun ReaderScreen(
    // ... å‚æ•°ä¿æŒä¸å˜
    viewModel: ReaderViewModel = hiltViewModel()
) {
    // ... çŠ¶æ€å®šä¹‰
    var isAnnotationMode by remember { mutableStateOf(false) }
    
    // ğŸ¨ å¤šè‰²æ”¯æŒï¼šå®šä¹‰ç”»ç¬”é¢œè‰²åˆ—è¡¨
    val penColors = listOf(
        Color.Black, 
        Color.Red, 
        Color.Blue, 
        Color(0xFF4CAF50) // Green
    )
    var currentStrokeColor by remember { mutableIntStateOf(android.graphics.Color.RED) }
    
    // ğŸ–Šï¸ å½“å‰æ­£åœ¨ç”»çš„çº¿æ¡ï¼ˆå±å¹•åæ ‡ï¼Œç”¨äºå®æ—¶åé¦ˆï¼‰
    // Pair<x, y>
    val currentStrokePath = remember { mutableStateListOf<Pair<Float, Float>>() }

    // ğŸ“„ å·²ä¿å­˜çš„çº¿æ¡ï¼ˆPDFåæ ‡ï¼Œç”¨äºæŒä¹…åŒ–æ˜¾ç¤ºï¼‰
    val savedAnnotations = remember { mutableStateListOf<AnnotationLine>() }

    // PDFView çš„å¼•ç”¨ï¼Œç”¨äºåæ ‡è½¬æ¢
    var pdfViewRef by remember { mutableStateOf<PDFView?>(null) }

    Box(modifier = Modifier.fillMaxSize()) {
        
        // ------------------------------------------------------------
        // 1. åº•å±‚ï¼šPDF æ˜¾ç¤ºå±‚ (åªè´Ÿè´£çœ‹å’Œæ˜¾ç¤ºå·²ä¿å­˜çš„ç¬”è®°)
        // ------------------------------------------------------------
        AndroidView(
            factory = { context ->
                PDFView(context, null).apply {
                    pdfViewRef = this
                    // åŸºç¡€é…ç½®...
                }
            },
            modifier = Modifier.fillMaxSize(),
            update = { pdfView ->
                // ã€å…³é”®ä¿®å¤1ã€‘é˜²æ­¢é—ªçƒï¼šåªæœ‰æ–‡ä»¶è·¯å¾„å˜äº†æ‰é‡æ–° load
                // ä¸è¦æŠŠ isAnnotationMode æ”¾åœ¨è¿™ä¸ª key é‡Œï¼
                val configKey = "${file.absolutePath}_${isNightMode}"
                
                if (pdfView.tag != configKey) {
                    pdfView.tag = configKey
                    pdfView.fromFile(file)
                        // ... å…¶ä»–é…ç½® (.enableSwipe(true) å§‹ç»ˆå¼€å¯ï¼Œé€šè¿‡ä¸Šå±‚æ‹¦æˆªæ¥æ§åˆ¶)
                        .onDraw { canvas, pageWidth, pageHeight, pageIdx ->
                            // åœ¨è¿™é‡Œç»˜åˆ¶â€œå·²ä¿å­˜â€çš„çº¿æ¡
                            // å› ä¸ºæ˜¯ PDFView å†…éƒ¨å›è°ƒï¼ŒCanvas å·²ç»è‡ªåŠ¨å˜æ¢åˆ°äº†è¯¥é¡µçš„åæ ‡ç³»
                            savedAnnotations.filter { it.pageIndex == pageIdx }.forEach { line ->
                                val paint = Paint().apply {
                                    color = line.color
                                    style = Paint.Style.STROKE
                                    strokeWidth = line.strokeWidth
                                }
                                // å°†å½’ä¸€åŒ–åæ ‡ (0.0-1.0) è¿˜åŸä¸ºå®é™…åƒç´ åæ ‡
                                val path = Path()
                                line.points.forEachIndexed { index, point ->
                                    val x = point.x * pageWidth
                                    val y = point.y * pageHeight
                                    if (index == 0) path.moveTo(x, y) else path.lineTo(x, y)
                                }
                                canvas.drawPath(path, paint)
                            }
                        }
                        .load()
                }
            }
        )

        // ------------------------------------------------------------
        // 2. é¡¶å±‚ï¼šæ‰‹å†™æ‹¦æˆªä¸ç»˜åˆ¶å±‚ (é€æ˜ç”»å¸ƒ)
        // ------------------------------------------------------------
        if (isAnnotationMode) {
            // è¿™ä¸ªé€æ˜å±‚è¦†ç›–å…¨å±ï¼Œæ‹¦æˆªæ‰‹åŠ¿
            Canvas(
                modifier = Modifier
                    .fillMaxSize()
                    .pointerInput(Unit) {
                        detectDragGestures(
                            onDragStart = { offset ->
                                currentStrokePath.clear()
                                currentStrokePath.add(offset.x to offset.y)
                            },
                            onDrag = { change, dragAmount ->
                                change.consume()
                                val newPos = change.position
                                currentStrokePath.add(newPos.x to newPos.y)
                            },
                            onDragEnd = {
                                // ã€å…³é”®ä¿®å¤2ã€‘åæ ‡è½¬æ¢ï¼šå±å¹•åæ ‡ -> PDF é¡µåæ ‡
                                pdfViewRef?.let { view ->
                                    // 1. æ‹¿åˆ°å½“å‰å±å¹•ä¸­å¿ƒå¯¹åº”çš„ PDF é¡µç  (è¿‘ä¼¼)
                                    val currentPageIdx = view.currentPage 
                                    
                                    // 2. è½¬æ¢æ¯ä¸ªç‚¹
                                    val pdfPoints = currentStrokePath.mapNotNull { (screenX, screenY) ->
                                        // è¿™é‡Œéœ€è¦ç”¨åˆ° AndroidPdfViewer çš„å†…éƒ¨æ–¹æ³•æˆ–è€…æ‰‹åŠ¨è®¡ç®—
                                        // ç®€åŒ–é€»è¾‘ï¼šåˆ©ç”¨å½“å‰è§†å›¾çš„ zoom å’Œ offset
                                        // æ³¨æ„ï¼šå®Œç¾çš„åæ ‡æ˜ å°„éœ€è¦ view.convertScreenPtoPageP (å¦‚æœåº“æ”¯æŒ)
                                        // æˆ–è€…ï¼šæ‰‹åŠ¨è®¡ç®—ç›¸å¯¹ä½ç½®
                                        
                                        // ç®€å•æ–¹æ¡ˆï¼šå‡è®¾æˆ‘ä»¬åªç”»åœ¨å½“å‰é¡µ (currentPage)
                                        // è·å–å½“å‰é¡µåœ¨å±å¹•ä¸Šçš„ä½ç½®å’Œå¤§å°
                                        // è¿™æ­¥æ¯”è¾ƒå¤æ‚ï¼Œéœ€æ ¹æ®åº“çš„ API è°ƒæ•´ï¼Œè¯¦è§ä¸‹æ–‡è§£é‡Š
                                        convertScreenPointToPdfPoint(view, screenX, screenY, currentPageIdx)
                                    }

                                    if (pdfPoints.isNotEmpty()) {
                                        savedAnnotations.add(
                                            AnnotationLine(
                                                pageIndex = currentPageIdx,
                                                points = pdfPoints,
                                                color = currentStrokeColor
                                            )
                                        )
                                        // é€šçŸ¥ PDFView é‡ç»˜ä»¥æ˜¾ç¤ºæ–°çº¿æ¡
                                        view.invalidate() 
                                    }
                                }
                                currentStrokePath.clear()
                            }
                        )
                    }
            ) {
                // å®æ—¶ç»˜åˆ¶ï¼šåªç”»å½“å‰æ‰‹æŒ‡æ»‘è¿‡çš„è·¯å¾„ï¼ˆå±å¹•åæ ‡ï¼‰
                // è¿™è§£å†³äº†â€œä¸æ˜¾ç¤ºæˆ‘æ»‘åŠ¨çš„çº¿æ¡â€çš„é—®é¢˜
                if (currentStrokePath.isNotEmpty()) {
                    val path = androidx.compose.ui.graphics.Path().apply {
                        moveTo(currentStrokePath.first().first, currentStrokePath.first().second)
                        for (i in 1 until currentStrokePath.size) {
                            lineTo(currentStrokePath[i].first, currentStrokePath[i].second)
                        }
                    }
                    drawPath(
                        path = path,
                        color = Color(currentStrokeColor),
                        style = androidx.compose.ui.graphics.drawscope.Stroke(
                            width = 5.dp.toPx(),
                            cap = androidx.compose.ui.graphics.StrokeCap.Round,
                            join = androidx.compose.ui.graphics.StrokeJoin.Round
                        )
                    )
                }
            }
        }

        // ------------------------------------------------------------
        // 3. UI æ§ä»¶å±‚ (åº•éƒ¨æ‚¬æµ®å²›)
        // ------------------------------------------------------------
        // ... (ä¿æŒä½ ä¹‹å‰çš„æ‚¬æµ®å²›ä»£ç )
        // åœ¨è¿™é‡Œæ·»åŠ é¢œè‰²é€‰æ‹©å™¨
        if (isAnnotationMode) {
            ColorPickerBar(
                colors = penColors,
                selectedColor = currentStrokeColor,
                onColorSelected = { currentStrokeColor = it.toArgb() },
                modifier = Modifier.align(Alignment.BottomCenter).padding(bottom = 100.dp)
            )
        }
    }
}

// ------------------------------------------------------------
// è¾…åŠ©å‡½æ•°ï¼šåæ ‡è½¬æ¢ (æ ¸å¿ƒéš¾ç‚¹)
// ------------------------------------------------------------
fun convertScreenPointToPdfPoint(
    view: PDFView, 
    screenX: Float, 
    screenY: Float, 
    pageIndex: Int
): PointFCompat? {
    // AndroidPdfViewer çš„æ ¸å¿ƒè½¬æ¢é€»è¾‘
    // 1. è·å–å½“å‰ç¼©æ”¾æ¯”ä¾‹
    val zoom = view.zoom 
    
    // 2. è·å–å½“å‰æ»šåŠ¨çš„åç§»é‡ (æ³¨æ„æ­£è´Ÿå·)
    val currentXOffset = view.currentXOffset
    val currentYOffset = view.currentYOffset
    
    // 3. å°†å±å¹•åæ ‡è¿˜åŸä¸º PDF å…¨å›¾åæ ‡ (World Coordinates)
    val pdfGlobalX = (screenX - currentXOffset) / zoom
    val pdfGlobalY = (screenY - currentYOffset) / zoom
    
    // 4. è·å–ç›®æ ‡é¡µé¢çš„å¤§å°å’Œä½ç½®
    val pageSize = view.getPageSize(pageIndex) ?: return null
    // æ³¨æ„ï¼šåº“å†…éƒ¨æ’ç‰ˆé€»è¾‘å¯èƒ½æŠŠé¡µé¢æŒ‰é¡ºåºæ’åˆ—ï¼Œè¿™é‡Œéœ€è¦è·å–è¯¥é¡µåœ¨ Global åæ ‡ç³»ä¸­çš„åç§»
    // ç®€åŒ–å¤„ç†ï¼šå¦‚æœä½ æ˜¯å•é¡µæ¨¡å¼ (SwipeHorizontal)ï¼Œä¸” fitEachPage=false
    // å¦‚æœæ˜¯è¿ç»­æ»šåŠ¨ï¼Œè¿™é‡Œéœ€è¦éå†è®¡ç®—é¡µé¢çš„ offsetYã€‚
    
    // æœ€ç¨³å¦¥çš„æ–¹æ³•æ˜¯ä½¿ç”¨ pdfView.toPagePoint() å¦‚æœåº“ç‰ˆæœ¬æ”¯æŒçš„è¯ã€‚
    // å¦‚æœä¸æ”¯æŒï¼Œé€šå¸¸å¯¹äºå‚ç›´æ»šåŠ¨ï¼Œé¡µé¢çš„ GlobalY å¤§æ¦‚æ˜¯ sum(previousPageHeights)
    
    // å‡è®¾ï¼šæˆ‘ä»¬é€šè¿‡ view.getPageAtOffset æ‹¿åˆ°äº†æ­£ç¡®çš„ pageIndex
    // æˆ‘ä»¬éœ€è¦ç›¸å¯¹è¯¥é¡µå·¦ä¸Šè§’çš„åæ ‡ï¼Œå¹¶å½’ä¸€åŒ– (0-1)
    
    // è¿™æ˜¯ä¸€ä¸ªå¤æ‚çš„æ•°å­¦é—®é¢˜ï¼Œé€šå¸¸å»ºè®®ç›´æ¥ä¿®æ”¹ AndroidPdfViewer æºç æš´éœ² mapCoordinate æ–¹æ³•
    // æˆ–è€…ä½¿ç”¨ç®€åŒ–ç‰ˆï¼šå¦‚æœå½“å‰åªæ˜¾ç¤ºè¿™ä¸€é¡µï¼ŒpdfGlobalX å°±æ˜¯é¡µå†… X
    
    // ä¸´æ—¶æ–¹æ¡ˆï¼ˆä»…ä¾›å‚è€ƒï¼Œéœ€æ ¹æ®ä½ çš„ PDF æ’ç‰ˆæ¨¡å¼è°ƒæ•´ï¼‰ï¼š
    val mappedX = pdfGlobalX / pageSize.width
    val mappedY = pdfGlobalY / pageSize.height // è¿™é‡Œå¯èƒ½éœ€è¦å‡å»è¯¥é¡µä¹‹å‰çš„é¡µé¢é«˜åº¦
    
    return PointFCompat(mappedX, mappedY)
}

@Composable
fun ColorPickerBar(
    colors: List<Color>,
    selectedColor: Int,
    onColorSelected: (Color) -> Unit,
    modifier: Modifier = Modifier
) {
    Row(
        modifier = modifier
            .background(Color.White, RoundedCornerShape(16.dp))
            .padding(8.dp),
        horizontalArrangement = Arrangement.spacedBy(8.dp)
    ) {
        colors.forEach { color ->
            Box(
                modifier = Modifier
                    .size(32.dp)
                    .clip(CircleShape)
                    .background(color)
                    .clickable { onColorSelected(color) }
                    .border(
                        width = if (color.toArgb() == selectedColor) 3.dp else 0.dp,
                        color = Color.Gray,
                        shape = CircleShape
                    )
            )
        }
    }
}
å…³é”®ä¿®æ”¹ç‚¹è§£é‡Š
åˆ†ç¦» Canvas å±‚ï¼š

æˆ‘ä»¬åœ¨ PDF ä¸Šé¢ç›–äº†ä¸€å±‚ Compose Canvasã€‚

å½“ isAnnotationMode = true æ—¶ï¼Œè¿™ä¸ª Canvas æ¥æ”¶è§¦æ‘¸äº‹ä»¶ã€‚ä½ æ‰‹æŒ‡åŠ¨ï¼Œå®ƒç›´æ¥ç”»çº¿ï¼Œä¸éœ€è¦ é€šçŸ¥ PDFViewï¼Œæ‰€ä»¥å®Œå…¨æ²¡æœ‰å»¶è¿Ÿï¼Œä¹Ÿæ²¡æœ‰åç§»ã€‚

æ•°æ®å›ºåŒ–ï¼š

åªæœ‰å½“ä½ æ‰‹æŒ‡ æŠ¬èµ· (onDragEnd) æ—¶ï¼Œæˆ‘ä»¬æ‰æŠŠå±å¹•ä¸Šçš„è¿™æ ¹çº¿ï¼Œè®¡ç®—æˆ PDF çš„åæ ‡ï¼Œå­˜å…¥ savedAnnotationsã€‚

å­˜è¿›å»åï¼Œæˆ‘ä»¬è°ƒç”¨ view.invalidate()ï¼Œè®©åº•å±‚çš„ PDFView æŠŠè¿™æ ¹æ–°çº¿ï¼ˆç”¨æ­£ç¡®çš„ç¼©æ”¾å’Œä½ç½®ï¼‰ç”»åœ¨çº¸ä¸Šã€‚

åŒæ—¶æ¸…ç©ºé¡¶å±‚ Canvasã€‚

è§£å†³é—ªçƒï¼š

æ³¨æ„ update = { ... } é‡Œçš„ configKeyã€‚ç°åœ¨çš„ä»£ç é‡Œï¼Œåˆ‡æ¢ isAnnotationMode ä¸ä¼šæ”¹å˜ configKeyï¼Œæ‰€ä»¥ pdfView.fromFile(...).load() ä¸ä¼šé‡æ–°æ‰§è¡Œã€‚è¿™å°±æ˜¯è§£å†³é—ªçƒçš„ç§˜è¯€ã€‚

ä¸‹ä¸€æ­¥è¡ŒåŠ¨
è¯·å°†ä¸Šé¢çš„ä»£ç é€»è¾‘æ•´åˆè¿›ä½ çš„ ReaderScreen.ktã€‚

å…³äºåæ ‡è½¬æ¢çš„ç‰¹åˆ«æç¤ºï¼š AndroidPdfViewer è¿™ä¸ªåº“åœ¨åæ ‡æ˜ å°„æ–¹é¢æ¯”è¾ƒå¼±ã€‚å¦‚æœä½ çš„é¡µé¢æ˜¯ è¿ç»­ç«–å‘æ»šåŠ¨ çš„ï¼Œä½ éœ€è¦è®¡ç®—ç‚¹å‡»ä½ç½®å±äºå“ªä¸€é¡µã€‚ æœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼š

æ‰‹å†™æ—¶ï¼Œé”å®š é¡µé¢æ»šåŠ¨ï¼ˆpdfView.isSwipeEnabled = falseï¼‰ã€‚

è¿™æ ·å±å¹•æ˜¾ç¤ºçš„å°±ä¸€å®šæ˜¯å½“å‰é¡µï¼ˆæˆ–è€…å¤§éƒ¨åˆ†æ˜¯ï¼‰ã€‚

è®¡ç®—ç›¸å¯¹ä½ç½®æ—¶ï¼Œå‡å» pdfView.currentXOffset å’Œ pdfView.currentYOffsetï¼Œå†é™¤ä»¥ pdfView.zoomï¼Œå°±èƒ½å¾—åˆ°ç›¸å¯¹ PDF åŸå§‹å°ºå¯¸çš„åæ ‡ã€‚