这是一个非常典型的前端夜间模式适配问题。根据你提供的代码文件，问题主要出在CSS 变量没有针对暗色模式进行重定义，以及 App.vue 中存在硬编码的背景色覆盖了全局设置。

要完美解决这个问题，我们需要按照“定义变量 -> 移除硬编码 -> 引入官方暗黑样式”的步骤进行修改。

以下是具体的解决方案：

第一步：修改 frontend/src/style.css (核心修复)
目前的 style.css 只定义了默认（亮色）下的颜色变量。我们需要利用 html.dark 选择器（Element Plus 切换暗黑模式的标准方式）来反转这些变量。

请将 style.css 的内容修改为如下（重点关注 html.dark 部分）：
/* Fonts */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

:root {
    --font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;

    /* 定义基础色板 (不变) */
    --color-slate-50: #f8fafc;
    --color-slate-100: #f1f5f9;
    --color-slate-200: #e2e8f0;
    --color-slate-300: #cbd5e1;
    --color-slate-400: #94a3b8;
    --color-slate-500: #64748b;
    --color-slate-600: #475569;
    --color-slate-700: #334155;
    --color-slate-800: #1e293b;
    --color-slate-900: #0f172a;

    --color-primary: #3b82f6;
    --color-primary-dark: #2563eb;

    /* 【亮色模式默认变量】 */
    --bg-color: var(--color-slate-50);           /* 浅色背景 */
    --text-main: var(--color-slate-900);         /* 深色文字 */
    --text-secondary: var(--color-slate-500);    /* 次要文字 */
    --card-bg: #ffffff;                          /* 卡片白底 */
    --border-color: var(--color-slate-200);      /* 浅色边框 */
    
    color-scheme: light;
}

/* 【新增：暗黑模式变量重写】 */
html.dark {
    /* 1. 背景变深 */
    --bg-color: #020617; /* 比 slate-900 更深一点，增强对比 */
    
    /* 2. 文字变浅 (解决黑色字体看不见的问题) */
    --text-main: var(--color-slate-100);
    --text-secondary: var(--color-slate-400);
    
    /* 3. 卡片和边框适配 */
    --card-bg: var(--color-slate-800);
    --border-color: var(--color-slate-700);

    /* 4. Element Plus 变量覆盖 (可选，微调组件颜色) */
    --el-bg-color: var(--bg-color);
    --el-text-color-primary: var(--text-main);
    --el-text-color-regular: var(--text-secondary);
    --el-border-color-light: var(--border-color);

    color-scheme: dark;
}

body {
    margin: 0;
    padding: 0;
    font-family: var(--font-family);
    /* 使用变量，而不是固定颜色 */
    background-color: var(--bg-color);
    color: var(--text-main);
    transition: background-color 0.3s, color 0.3s; /* 增加切换动画 */
}

/* ...原有的 Utility Classes ... */

/* 修复 Element Plus 卡片在暗黑模式下的表现 */
.el-card {
    background-color: var(--card-bg); /* 使用变量 */
    border-color: var(--border-color);
    color: var(--text-main);
}

.el-card__header {
    border-bottom-color: var(--border-color);
}

/* 修复表格在暗黑模式下的表现 */
.el-table {
    --el-table-bg-color: var(--card-bg);
    --el-table-tr-bg-color: var(--card-bg);
    --el-table-header-bg-color: var(--color-slate-800); /* 表头稍微深一点 */
    --el-table-row-hover-bg-color: var(--color-slate-700);
    --el-table-text-color: var(--text-main);
    --el-table-header-text-color: var(--text-secondary);
    background-color: transparent;
}
第二步：修改 frontend/src/App.vue (移除冲突)
你在 App.vue 中硬编码了 background-color: #f4f4f5;，这会强制覆盖掉 style.css 中定义的夜间模式背景色。必须删除它。

修改后的 App.vue：

代码段

<template>
  <router-view />
</template>

<script setup>
</script>

<style>
/* 移除这里的 body 样式，因为它已经在 style.css 中定义了，
   且这里的固定颜色会导致夜间模式背景无法变黑 */
</style>
第三步：修改 frontend/src/main.js (引入官方暗黑样式)
Element Plus 的组件（如输入框、下拉菜单）需要官方的暗黑样式文件才能正常显示。

修改 main.js，添加一行导入：

JavaScript

import { createApp } from 'vue'
import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'
// 1. 【新增】引入 Element Plus 暗黑模式 CSS 变量
import 'element-plus/theme-chalk/dark/css-vars.css' 
import * as ElementPlusIconsVue from '@element-plus/icons-vue'
import App from './App.vue'
import router from './router'

import './style.css'

const app = createApp(App)

for (const [key, component] of Object.entries(ElementPlusIconsVue)) {
    app.component(key, component)
}

app.use(ElementPlus)
app.use(router)

app.mount('#app')
总结原因与效果
背景不黑原因：App.vue 里的 background-color: #f4f4f5 优先级高且是固定颜色，删掉它，让 style.css 里的 var(--bg-color) 生效。

字体看不见原因：原 style.css 没有在暗黑模式下把 --text-main 变成浅色。新增的 html.dark 块解决了这个问题。

组件样式问题：引入 dark/css-vars.css 并使用变量 --card-bg 统一管理卡片背景。