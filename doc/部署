# 项目更新部署指南 (VPS)

本文档仅包含 **更新现有部署** 的步骤。假设你的项目位于 `/opt/paperless_meeting`。

## 1. 停止旧服务
在更新代码前，先停止正在运行的 Docker 容器。

```bash
cd /opt/paperless_meeting
docker compose down
```

## 2. 上传新代码
将本地最新的项目代码上传到 VPS，覆盖 `/opt/paperless_meeting` 目录下的内容。
**注意**: 请勿覆盖或删除 `backend/database.db` (如果它是实际生产数据库) 以及 `backend/static/` 下的用户上传文件，除非你确定要重置数据。

建议仅上传以下变动的文件夹/文件：
- `backend/` (排除 database.db, uploads, static)
- `frontend/`
- `docker-compose.yml`

## 3. 重新构建并启动
上传完成后，重新构建 Docker 镜像并启动服务。

```bash
cd /opt/paperless_meeting

# 重新构建镜像并后台启动
# --build 参数确保使用最新的代码重新编译
docker compose up -d --build
```

## 4. 验证更新
等待几十秒启动完成后，查看日志确认无报错：

```bash
docker compose logs -f
```

访问 https://coso.top 检查新功能是否生效。

---
**附：常用维护命令**

- **查看实时日志**: `docker compose logs -f`
- **重启服务 (不重修)**: `docker compose restart`
- **进入后端容器**: `docker exec -it meeting_backend /bin/bash`